{% assign values = site.categories | where:"ref", "values" | first %}
{% assign value_cards = site.value_cards %}
<div id="value-card-list" class="card-list">
    {% for card in value_cards %}
    <div class="value-card">
        <div class="value-card-inner" style="background: {{values.color}}; position: relative;">
            <div class="value-card-name">{{card.name}}</div>
            <div class="deleteValueCardButtonContainer">
                <button class="deleteValueCardButton" onclick="removeValueCard(this)">
                    <img src="{{site.baseurl}}/assets/images/remove_logo.png" width="25px">
                </button>
            </div>
        </div>
    </div>
    {% endfor %}
    <div id="add-value-card" class="value-card" style="cursor: pointer;" onclick="createNewValueCard()">
            <div class="value-card-inner" style="background: white;">
                <div class="value-card-name" style="color: {{values.color}};font-weight: bold;font-size: 60px;">+</div>
            </div>
    </div>
</div>


<script>

function createNewValueCard() {
    var newValueCard = document.createElement('div');
    newValueCard.classList.add('new-value-card');
    newValueCard.classList.add('value-card');

    var newValueCardInner = document.createElement('div');
    newValueCardInner.classList.add('value-card-inner');
    newValueCardInner.style = "background: {{values.color}};";
    newValueCard.appendChild(newValueCardInner);

    var newValueCardTextArea = document.createElement('textarea');
    newValueCardTextArea.classList.add('value-card-name');
    newValueCardTextArea.classList.add('value-card-textarea');
    newValueCardTextArea.placeholder = "add card name";
    newValueCardTextArea.setAttribute('maxlength', '32');
    newValueCardTextArea.style = "height: 20px;";
    newValueCardTextArea.addEventListener('keyup', function() {
        textareaAutoGrow(newValueCardTextArea, 20);
    });
    newValueCardInner.appendChild(newValueCardTextArea);

    var deleteButton = document.createElement('button');
    deleteButton.classList.add('deleteValueCardButton');
    deleteButton.addEventListener('click', function() {
        removeValueCard(deleteButton);
    });

    var deleteButtonImg = document.createElement('img');
    deleteButtonImg.src = "{{site.baseurl}}/assets/images/remove_logo.png";
    deleteButtonImg.width = "25px";
    deleteButton.appendChild(deleteButtonImg);

    var deleteButtonContainer = document.createElement('div');
    deleteButtonContainer.classList.add("deleteValueCardButtonContainer");
    deleteButtonContainer.appendChild(deleteButton);
    newValueCardInner.appendChild(deleteButtonContainer);

    document.getElementById('value-card-list').insertBefore(newValueCard, document.getElementById('add-value-card'));
}

function textareaAutoGrow(element, size) {
    element.style.height = size+"px";
    element.style.height = (element.scrollHeight)+"px";
}

function writeValueCards() {
    var newCards = document.getElementsByClassName('value-card-textarea');
    for(var i = 0; i < newCards.length; i++) {
       writeValueCard("{{ values.lang }}", newCards[i].value);
    }
}

function removeValueCard(e) {
    var valueCard = e.closest(".value-card");
    document.getElementById("value-card-list").removeChild(valueCard);
}

</script>
